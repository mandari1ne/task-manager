<div class="modal fade" id="passwordModal" tabindex="-1" aria-labelledby="passwordModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg password-modal-content">

            <div class="modal-header bg-light border-0 position-relative">
                <div class="modal-top-accent"></div>
                <h5 class="modal-title fw-bold text-primary" id="passwordModalLabel">Change Password</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body px-4 pb-3">
                <div id="password-message" class="alert d-none" role="alert"></div>

                <form id="password-change-form" method="post"
                      action="{% url 'change_password' %}"
                      onsubmit="submitPasswordForm(event)">
                    {% csrf_token %}

                    <div class="mb-3">
                        {{ form.old_password.label_tag }}
                        {{ form.old_password }}
                    </div>
                    <div class="mb-3">
                        {{ form.new_password1.label_tag }}
                        {{ form.new_password1 }}
                    </div>
                    <div class="mb-3">
                        {{ form.new_password2.label_tag }}
                        {{ form.new_password2 }}
                    </div>

                    <div class="d-flex justify-content-end mt-4">
                        <button type="button" class="btn btn-outline-secondary me-2" data-bs-dismiss="modal">
                            Cancel
                        </button>
                        <button type="submit" class="btn btn-primary">
                            Save changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    .password-modal-content {
        background: #f8fbff;
        border-radius: 1rem;
        overflow: hidden;
        transition: all 0.3s ease;
        position: relative;
    }

    .modal-top-accent {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 6px;
        background: linear-gradient(90deg, #0d6efd, #00bfff);
        border-top-left-radius: 1rem;
        border-top-right-radius: 1rem;
    }

    #passwordModal .modal-header {
        border-bottom: 1px solid #e0e8f8;
        border-top-left-radius: 1rem;
        border-top-right-radius: 1rem;
    }

    #passwordModal label {
        font-weight: 500;
        color: #0d6efd;
    }

    #passwordModal input[type="password"] {
        border: 1px solid #cfe2ff;
        border-radius: 0.5rem;
        padding: 0.6rem 0.75rem;
        width: 100%;
    }

    #passwordModal input[type="password"]:focus {
        outline: none;
        border-color: #0d6efd;
        box-shadow: 0 0 0 0.15rem rgba(13,110,253,.25);
    }

    #passwordModal .btn-primary {
        background-color: #0d6efd;
        border-color: #0d6efd;
        border-radius: 0.5rem;
        font-weight: 600;
    }

    #passwordModal .btn-primary:hover {
        background-color: #0b5ed7;
    }

    #passwordModal .btn-outline-secondary {
        border-radius: 0.5rem;
    }

    .modal-backdrop.show {
        background-color: rgba(13, 37, 63, 0.35);
        backdrop-filter: blur(2px);
    }
</style>
